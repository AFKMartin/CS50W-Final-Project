{% extends "explorer/layout.html" %}

{% load static %}

{% block title %}Rankings{% endblock %}

{% block content %}

<h1 class="text-center mb-4">Rankings</h1>

<div class="ranking-grid">

  <!-- Collatz Steps -->
  <div class="ranking-block card shadow-sm">
    <div class="card-body">
      <h2 class="card-title text-center mb-3">Most Steps (Collatz)</h2>
      <ol class="list-group list-group-numbered">
        {% for user in top_steps %}
          <li class="list-group-item d-flex justify-content-between align-items-center
                     {% if user == request.user %}bg-light fw-bold{% endif %}">
            
            <span>
              {% if forloop.counter == 1 %}ðŸ¥‡{% elif forloop.counter == 2 %}ðŸ¥ˆ{% elif forloop.counter == 3 %}ðŸ¥‰{% endif %}
              {{ user.username }}
              {% if user == request.user %}
                <span class="badge bg-primary ms-2">You</span>
              {% endif %}
            </span>

            <strong>{{ user.best_steps|floatformat:0 }}</strong>
          </li>
        {% empty %}
          <li class="list-group-item text-muted">No scores.</li>
        {% endfor %}
      </ol>
    </div>
  </div>

  <!-- Collatz Max Value -->
  <div class="ranking-block card shadow-sm">
    <div class="card-body">
      <h2 class="card-title text-center mb-3">Highest Max Value (Collatz)</h2>
      <ol class="list-group list-group-numbered">
        {% for user in top_max_value %}
          <li class="list-group-item d-flex justify-content-between align-items-center
                     {% if user == request.user %}bg-light fw-bold{% endif %}">
            
            <span>
              {% if forloop.counter == 1 %}ðŸ¥‡{% elif forloop.counter == 2 %}ðŸ¥ˆ{% elif forloop.counter == 3 %}ðŸ¥‰{% endif %}
              {{ user.username }}
              {% if user == request.user %}
                <span class="badge bg-primary ms-2">You</span>
              {% endif %}
            </span>

            <strong>{{ user.best_max|floatformat:0 }}</strong>
          </li>
        {% empty %}
          <li class="list-group-item text-muted">No scores.</li>
        {% endfor %}
      </ol>
    </div>
  </div>

  <!-- Goldbach Best Time -->
  <div class="ranking-block card shadow-sm">
    <div class="card-body">
      <h2 class="card-title text-center mb-3">Best Time (Goldbach)</h2>
      <ol class="list-group list-group-numbered">
        {% for user in top_goldbach %}
          <li class="list-group-item d-flex justify-content-between align-items-center
                     {% if user == request.user %}bg-light fw-bold{% endif %}">
            
            <span>
              {% if forloop.counter == 1 %}ðŸ¥‡{% elif forloop.counter == 2 %}ðŸ¥ˆ{% elif forloop.counter == 3 %}ðŸ¥‰{% endif %}
              {{ user.username }}
              {% if user == request.user %}
                <span class="badge bg-primary ms-2">You</span>
              {% endif %}
            </span>

            <strong>{{ user.best_time|floatformat:1 }}s</strong>
          </li>
        {% empty %}
          <li class="list-group-item text-muted">No scores.</li>
        {% endfor %}
      </ol>
    </div>
  </div>

</div>

{% endblock %}
